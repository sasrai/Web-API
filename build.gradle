plugins {
    id "java"
    id "com.qixalite.spongestart" version "1.6.0"
}

group = project.group;
version = "${project.version}-S${project.spongeVersion}";

repositories {
    mavenCentral()
    maven {
        url 'https://repo.spongepowered.org/maven/'
    }
}

spongestart {
    eula true
    minecraft project.minecraftVersion
}

dependencies {
    compileOnly group: 'org.spongepowered', name: 'spongeapi', version: "${project.spongeVersion}.0-SNAPSHOT"
    compile group: 'org.eclipse.jetty', name: 'jetty-server', version: '9.4.2.v20170220'
    compile group: 'org.eclipse.jetty', name: 'jetty-servlet', version: '9.4.2.v20170220'
    compile group: 'org.eclipse.jetty', name: 'jetty-http', version: '9.4.2.v20170220'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.8.7'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.8.7'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.8.7'
}

jar {
    // Include all compile time dependencies in the jar (e.g. Jetty)
    // Sponge is declared compileOnly so that it doesn't get included here
    from configurations.compile.collect {
        zipTree(it)
    }

    // Exclude signature files from JARs
    exclude 'META-INF/*.RSA', 'META-INF/*.SF','META-INF/*.DSA'
}
